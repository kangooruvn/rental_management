{% extends "base.html" %}
{% block title %}Phòng {{ room.name }}{% endblock %}
{% block content %}
<h2>Phòng: {{ room.name }}</h2>
<p><strong>Tiền thuê:</strong> {{ "{:,.0f}".format(room.rent_price) }} đ | <strong>Internet:</strong> {{ "{:,.0f}".format(room.internet_fee) }} đ</p>

<a href="{{ url_for('create_tenant', room_id=room.id) }}" class="btn btn-primary mb-4">
    <i class="bi bi-person-plus"></i> Thêm khách thuê
</a>

<h4>Danh sách khách thuê</h4>
<table class="table table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th>Họ tên</th>
            <th>Số điện thoại</th>
            <th>Email</th>
            <th>Thao tác</th>
        </tr>
    </thead>
    <tbody>
        {% for tenant in tenants %}
        <tr>
            <td><a href="{{ url_for('tenant_detail', tenant_id=tenant.id) }}">{{ tenant.name }}</a></td>
            <td>{{ tenant.phone or '-' }}</td>
            <td>{{ tenant.email or '-' }}</td>
            <td><a href="{{ url_for('tenant_detail', tenant_id=tenant.id) }}" class="btn btn-sm btn-info">Chi tiết</a></td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4" class="text-center">Chưa có khách thuê nào</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<div class="mt-4">
    <a href="{{ url_for('edit_room', room_id=room.id) }}" class="btn btn-warning me-2">
        <i class="bi bi-pencil"></i> Sửa thông tin phòng
    </a>
    
    {% if not room.tenants %}
    <form method="POST" action="{{ url_for('delete_room', room_id=room.id) }}" class="d-inline"
          onsubmit="return confirm('Xóa phòng {{ room.name }}? Thao tác này không thể hoàn tác!')">
        <button type="submit" class="btn btn-danger">
            <i class="bi bi-trash"></i> Xóa phòng
        </button>
    </form>
    {% else %}
    <button class="btn btn-secondary" disabled>
        <i class="bi bi-trash"></i> Xóa phòng (đang có khách)
    </button>
    {% endif %}
    
    <a href="{{ url_for('dashboard') }}" class="btn btn-secondary ms-2">Quay lại danh sách</a>
</div>
{% endblock %}

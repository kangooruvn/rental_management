<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>H√≥a ƒë∆°n th√°ng {{ bill.month.strftime('%m/%Y') }}</title>
    <style>
        body { font-family: DejaVu Sans, Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .header { text-align: center; margin-bottom: 30px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #000; padding: 12px; text-align: left; }
        th { background-color: #f0f0f0; }
        .total { font-size: 1.6em; font-weight: bold; text-align: right; margin-top: 30px; }
        .footer { margin-top: 60px; text-align: center; color: #555; }
        @media print {
            body { margin: 20px; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>H√ìA ƒê∆†N TI·ªÄN PH√íNG TR·ªå</h1>
        <h3>Th√°ng {{ bill.month.strftime('%m/%Y') }}</h3>
    </div>

    <p><strong>Ch·ªß tr·ªç:</strong> {{ current_user.username }}</p>
    <p><strong>Kh√°ch thu√™:</strong> {{ tenant.name }}</p>
    <p><strong>Ph√≤ng:</strong> {{ room.name }}</p>
    <p><strong>SƒêT:</strong> {{ tenant.phone or 'Ch∆∞a c√≥' }}</p>

    <table>
        <tr><th>M·ª•c</th><th>Chi ti·∫øt</th><th>Th√†nh ti·ªÅn (VNƒê)</th></tr>
        <tr>
            <td>Ti·ªÅn thu√™ ph√≤ng</td>
            <td>1 th√°ng</td>
            <td>{{ "{:,.0f}".format(room.rent_price) }}</td>
        </tr>
        <tr>
            <td>Ph√≠ Internet</td>
            <td>C·ªë ƒë·ªãnh</td>
            <td>{{ "{:,.0f}".format(room.internet_fee) }}</td>
        </tr>
        <tr>
            <td>Ti·ªÅn ƒëi·ªán</td>
            <td>
                Ch·ªâ s·ªë c≈©: {{ "%.1f" % bill.electricity_old }} kWh<br>
                Ch·ªâ s·ªë m·ªõi: {{ "%.1f" % bill.electricity_new }} kWh<br>
                S·ªë d√πng: {{ "%.1f" % bill.electricity_usage }} kWh √ó {{ "{:,.0f}".format(bill.electricity_price) }} ƒë/kWh
            </td>
            <td>{{ "{:,.0f}".format(bill.electricity_usage * bill.electricity_price) }}</td>
        </tr>
        <tr>
            <td>Ti·ªÅn n∆∞·ªõc</td>
            <td>
                Ch·ªâ s·ªë c≈©: {{ "%.4f" % bill.water_old }} m¬≥<br>
                Ch·ªâ s·ªë m·ªõi: {{ "%.4f" % bill.water_new }} m¬≥<br>
                S·ªë d√πng: {{ "%.4f" % bill.water_usage }} m¬≥ (b·∫≠c thang: 5 kh·ªëi ƒë·∫ßu 16.000 ƒë, ti·∫øp theo 27.000 ƒë)
            </td>
            <td>{{ "{:,.0f}".format(water_cost) }}</td>
        </tr>
    </table>

    <!-- Th√™m ph·∫ßn chi ti·∫øt ti·ªÅn ƒëi·ªán n∆∞·ªõc tr∆∞·ªõc t·ªïng -->
    <div style="margin-top: 20px; font-size: 1.1em;">
        <p><strong>Ti·ªÅn ƒëi·ªán:</strong> {{ "{:,.0f}".format(bill.electricity_usage * bill.electricity_price) }} ƒë</p>
        <p><strong>Ti·ªÅn n∆∞·ªõc:</strong> {{ "{:,.0f}".format(water_cost) }} ƒë</p>
        <p><strong>Ti·ªÅn thu√™ ph√≤ng + Internet:</strong> {{ "{:,.0f}".format(room.rent_price + room.internet_fee) }} ƒë</p>
    </div>

    <div class="total">
        T·ªîNG TI·ªÄN: <span style="color: red; font-size: 1.8em;">{{ "{:,.0f}".format(bill.total) }} VNƒê</span>
    </div>

    <div class="footer">
        <p>Ng√†y in: {{ datetime.now().strftime('%d/%m/%Y %H:%M') }}</p>
        <p>Xin c·∫£m ∆°n qu√Ω kh√°ch!</p>
    </div>

    <div class="no-print" style="text-align: center; margin-top: 40px;">
        <button onclick="window.print()" style="padding: 10px 20px; font-size: 18px;">üñ®Ô∏è In h√≥a ƒë∆°n (Ctrl+P)</button>
    </div>
</body>
</html>

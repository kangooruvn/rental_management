<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>H√≥a ƒë∆°n th√°ng {{ bill.month.strftime('%m/%Y') }}</title>
    <style>
        body { font-family: DejaVu Sans, Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .header { text-align: center; margin-bottom: 30px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #000; padding: 12px; text-align: left; }
        th { background-color: #f0f0f0; }
        .total { font-size: 1.6em; font-weight: bold; text-align: right; margin-top: 30px; }
        .footer { margin-top: 60px; text-align: center; color: #555; }
        @media print {
            body { margin: 20px; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>H√ìA ƒê∆†N TI·ªÄN PH√íNG TR·ªå</h1>
        <h3>Th√°ng {{ bill.month.strftime('%m/%Y') }}</h3>
    </div>

    <p><strong>Ch·ªß tr·ªç:</strong> {{ current_user.username }}</p>
    <p><strong>Kh√°ch thu√™:</strong> {{ tenant.name }}</p>
    <p><strong>Ph√≤ng:</strong> {{ room.name }}</p>
    <p><strong>SƒêT:</strong> {{ tenant.phone or 'Ch∆∞a c√≥' }}</p>

   <table>
        <tr><th>M·ª•c</th><th>Chi ti·∫øt</th><th>Th√†nh ti·ªÅn (VNƒê)</th></tr>
        <tr><td>Ti·ªÅn thu√™ ph√≤ng</td><td>1 th√°ng</td><td>{{ "{:,.0f}".format(room.rent_price) }}</td></tr>
        <tr><td>Ph√≠ Internet</td><td>C·ªë ƒë·ªãnh</td><td>{{ "{:,.0f}".format(room.internet_fee) }}</td></tr>
        <tr>
            <td>Ti·ªÅn ƒëi·ªán (ch∆∞a VAT)</td>
            <td>{{ "%.1f" % bill.electricity_usage }} kWh √ó {{ "{:,.0f}".format(bill.average_price_before_vat|default(0)) }} ƒë/kWh (trung b√¨nh to√†n nh√†)</td>
            <td>{{ "{:,.0f}".format(bill.room_electricity_before_vat|default(0)) }}</td>
        </tr>
        <tr>
            <td>VAT ƒëi·ªán (8%)</td>
            <td></td>
            <td>{{ "{:,.0f}".format(bill.electricity_vat|default(0)) }}</td>
        </tr>
        <tr>
            <td>Ti·ªÅn ƒëi·ªán (c√≥ VAT)</td>
            <td></td>
            <td class="fw-bold">{{ "{:,.0f}".format(bill.room_electricity_with_vat|default(0)) }}</td>
        </tr>
        <tr>
            <td>Ti·ªÅn n∆∞·ªõc</td>
            <td>{{ "%.4f" % bill.water_usage }} m¬≥ (b·∫≠c thang)</td>
            <td>{{ "{:,.0f}".format(bill.water_cost|default(0)) }}</td>
        </tr>
    </table>

    <div class="total">
        T·ªîNG TI·ªÄN: <span style="color: red; font-size: 1.8em;">{{ "{:,.0f}".format(bill.total) }} VNƒê</span>
    </div>

    <div class="footer">
        <p>Ng√†y in: {{ datetime.now().strftime('%d/%m/%Y %H:%M') }}</p>
        <p>Xin c·∫£m ∆°n qu√Ω kh√°ch!</p>
    </div>

    <div class="no-print" style="text-align: center; margin-top: 40px;">
        <button onclick="window.print()" style="padding: 10px 20px; font-size: 18px;">üñ®Ô∏è In h√≥a ƒë∆°n (Ctrl+P)</button>
    </div>
</body>
</html>

